# HR Analytics Bot - AI-аналитик резюме

<div align="center">
  
  <img src="https://img.shields.io/badge/Python-3.9%2B-blue" alt="Python">
  <img src="https://img.shields.io/badge/Telegram-Bot-32A2DB" alt="Telegram">
  <img src="https://img.shields.io/badge/Architecture-AgenticRAG-orange" alt="AgenticRAG">
  <img src="https://img.shields.io/badge/LLM-GigaChat-green" alt="GigaChat">
  
  <br>
  
  *Интеллектуальный чат-бот для поиска IT-специалистов по базе резюме с hh.ru*
  
</div>

---

## Содержание

- [Возможности](#возможности)
- [Архитектура системы](#архитектура-системы)
- [Алгоритм работы](#алгоритм-работы)
- [Установка и запуск](#установка-и-запуск)
- [Использование бота](#использование-бота)
- [Технические детали](#технические-детали)
- [Структура проекта](#структура-проекта)
- [Примеры работы](#примеры-работы)
- [Дальнейшее развитие](#дальнейшее-развитие)

---

## Возможности

**Интеллектуальный поиск** кандидатов по 5000+ резюме  
**Анализ на естественном языке** — пишите запросы как думаете  
**AgenticRAG архитектура** — GigaChat как агент управляет поиском  
**Фильтрация** по навыкам, городу, опыту работы  
**Автоматический анализ** релевантности с обоснованиями  
**Telegram интерфейс** — удобное взаимодействие  

---

## Архитектура системы

Система построена на **AgenticRAG** (Retrieval-Augmented Generation с агентским управлением), где языковая модель выступает в роли интеллектуального координатора.


```mermaid
flowchart TD
    A[Пользователь в Telegram] --> B[Запрос на естественном языке]
    B --> C[Telegram Bot<br>Интерфейсный слой]
    
    C --> D[AgenticRAG Handler<br>Ядро системы]
    
    D --> E{Фаза 1: Анализ запроса<br>LLM GigaChat}
    E --> F[JSON-план:<br>Ключевые навыки, Город,<br>Опыт работы, Должность]
    
    F --> G[Фаза 2: Векторный поиск<br>ChromaDB]
    G --> H{Найдено ≥5<br>релевантных резюме?}
    
    H -- Да --> I[Продолжить анализ]
    H -- Нет --> J[Fallback-стратегия<br>Ослабление критериев]
    J --> I
    
    I --> K[Фаза 3: Анализ и ранжирование<br>Оценка релевантности 0-100]
    
    subgraph Scoring[Система весов]
        L[Навыки 40%<br>Соответствие технологиям]
        M[Опыт 25%<br>Требуемый стаж]
        N[Локация 20%<br>Совпадение города]
        O[Должность 15%<br>Релевантность позиции]
    end
    
    K --> L
    K --> M
    K --> N
    K --> O
    
    L --> P[Ранжированный список<br>кандидатов]
    M --> P
    N --> P
    O --> P
    
    P --> Q[Фаза 4: Формирование ответа]
    Q --> R[Итоговый ответ:<br>Анализ, Список, Ссылки]
    
    R --> S[Пользователь получает результат]
```

### Ключевые компоненты

| Компонент | Технология | Назначение |
|-----------|------------|------------|
| Telegram Bot | aiogram 3.x | Интерфейс пользователя |
| AgenticRAG Handler | Python + GigaChat | Интеллектуальный координатор |
| Векторная БД | ChromaDB | Хранение и поиск резюме |
| Модель эмбеддингов | all-MiniLM-L6-v2 | Семантические эмбеддинги |
| Обработка данных | Custom Pipeline | Подготовка и обогащение резюме |

---

## Алгоритм работы

## Алгоритм работы

Система использует 4-фазный алгоритм AgenticRAG для интеллектуального поиска кандидатов. Каждая фаза выполняет специфическую задачу, обеспечивая высокую точность и релевантность результатов.

### Фаза 1: Анализ и планирование запроса

**Вход**: Естественно-языковой запрос пользователя (например, "Найди React-разработчиков в Москве с опытом от 3 лет")

**Процесс**: LLM (GigaChat) анализирует запрос, выделяя ключевые параметры:
- Технологии и навыки (React, TypeScript, Redux)
- Локация (Москва, удалённая работа)
- Требования к опыту (от 3 лет, senior/middle)
- Должность (фронтенд, бэкенд, fullstack)

**Выход**: Структурированный план поиска, который включает список поисковых запросов и фильтров для векторной базы данных.

### Фаза 2: Многоэтапный векторный поиск

Система выполняет итеративный поиск с постепенным ослаблением критериев:

1. **Первичный поиск** с полным набором фильтров
2. **Если <5 результатов** → ослабляем требования к опыту
3. **Если всё ещё мало** → убираем требования к локации
4. **Финальный этап** → поиск только по ключевым навыкам

Каждый этап использует семантические эмбеддинги модели `all-MiniLM-L6-v2` для поиска в ChromaDB.

### Фаза 3: Оценка и ранжирование релевантности

Найденные резюме оцениваются по взвешенной системе:

| Критерий | Вес | Метод оценки |
|----------|-----|--------------|
| Навыки | 40% | Наличие требуемых технологий в поле `all_skills` |
| Опыт работы | 25% | Сравнение с `min_experience_years` |
| Локация | 20% | Точное или частичное совпадение города |
| Должность | 15% | Релевантность `desired_position` запросу |

**Формула оценки**:
`Общий балл = (Навыки × 0.4) + (Опыт × 0.25) + (Локация × 0.2) + (Должность × 0.15)`

### Фаза 4: Формирование итогового ответа

GigaChat анализирует ранжированный список и создает структурированный ответ:

1. **Краткий анализ** - обоснование выбранных кандидатов
2. **Ранжированный список** - кандидаты с оценками и ключевыми компетенциями
3. **Ссылки на резюме** - прямые ссылки на hh.ru
4. **Статистика поиска** - количество найденных и отфильтрованных резюме

Пример выходного формата:
```
JSON
{
  "thought_process": "Пользователь ищет React-разработчиков в Москве с опытом от 3 лет. Основные параметры: технологии (React и смежные), город (Москва), минимальный опыт (3 года).",
  "search_queries": [
    "React разработчик",
    "Frontend React developer",
    "React программист"
  ],
  "filters": {
    "location": "москва",
    "min_experience_years": 3,
    "required_skills": ["React", "React.js", "JavaScript"]
  },
  "analysis_instructions": "Оценить кандидатов на соответствие запросу: наличие опыта работы с React, проживание в Москве или готовность к переезду, общий опыт разработки не менее 3 лет.",
  "requires_refinement": false
}
```

---

## Установка и запуск

Этот раздел будет детализирован на следующих шагах.

---

## Использование бота

Этот раздел будет детализирован на следующих шагах.

---

## Технические детали

## Технические детали

```mermaid
flowchart TD
    subgraph DataPrep[Подготовка данных]
        direction TB
        A[Исходные резюме] --> B[Извлечение навыков]
        A --> C[Нормализация]
        A --> D[Стандартизация]
        B --> E[ChromaDB]
        C --> E
        D --> E
    end
    
    subgraph VectorDB[Хранилище]
        E --> F[5006 резюме]
        F --> G[Эмбеддинги]
        F --> H[Метаданные]
    end
    
    subgraph QueryFlow[Запрос]
        I[Запрос] --> J[Анализ]
        J --> K[План]
        K --> L[Поиск]
        G --> L
        H --> L
        L --> M{Результаты}
        M -->|≥5| N[OK]
        M -->|<5| O[Fallback]
        O --> N
    end
    
    subgraph Analysis[Анализ]
        N --> P[Оценка]
        P --> Q[Ранжирование]
        Q --> R[Ответ]
        R --> S[Telegram]
    end
    
    DataPrep --> VectorDB
    VectorDB --> QueryFlow
    QueryFlow --> Analysis

    style DataPrep stroke:#ddd,stroke-width:2px
    style VectorDB stroke:#ddd,stroke-width:2px
    style QueryFlow stroke:#ddd,stroke-width:2px
    style Analysis stroke:#ddd,stroke-width:2px
    style A stroke:#666,stroke-width:1px
    style I stroke:#666,stroke-width:1px
    style S stroke:#666,stroke-width:1px
```
---

## Структура проекта

Этот раздел будет детализирован на следующих шагах.

---

## Примеры работы

Этот раздел будет детализирован на следующих шагах.

---

## Дальнейшее развитие

Этот раздел будет детализирован на следующих шагах.

---

<div align="center">
  
  <br>
  
  **Если проект полезен — поставьте звезду на GitHub!**
  
  <br>
  
  <img src="https://img.shields.io/github/stars/7Lainero7/Study_AI_analytic_CV?style=social" alt="GitHub stars">
  
  <br>
  
  *Последнее обновление: декабрь 2025*
  
</div>
